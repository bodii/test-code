<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<title>this 及其作用域</title>
</head>
<body>
	<script type="text/javascript">
		'use strict'

		function CleverLichenEater () {
			this.energy = 10;
			this.direction = 'ne';
		}

		CleverLichenEater.prototype.act = function (surroundings) {
			var emptySpace = findDirections(surroundings, ' ');
			var lichen = findDirections(surroundings, '*');

			if (surroundings[this.direction] != ' ')
				this.direction = randomElement(emptySpace);

			if (this.energy >= 30 && emptySpace.length > 0) 
				return {type: 'reproduce', direction: randomElement(emptySpace)};
			else if (lichen.length > 1)
				return {type: 'eat', direction: randomElement(lichen)};
			else if (emptySpace.length > 0)
				return {type: 'move', direction: this.direction};
			else
				return {type: 'wait'};
		};
		creatureTypes.register(CleverLichenEater, 'c');
	</script>	
</body>
</html>