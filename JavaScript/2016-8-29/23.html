<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<title>多重继承</title>
</head>
<body>
	<script type="text/javascript">
		'use strict'

		 // 创建对象
		 Object.prototype.create = function () {
		 	var object = this;
		 	if (object.construct != undefined)
		 		object.construct.apply(object, arguments);
		 	return object;
		 };

		 // 继承
		 Object.prototype.extend = function (properties) {
		 	var result = Object.prototype;
		 	forEachIn(properties, function (name, value) {
		 		result[name] = value;
		 	});
		 	return result;
		 };

		 function forEachIn (object, action) {
		 	for (let name in object) {
		 		if (Object.prototype.propertyIsEnumerable.call(object, name))
		 			action(name, object[name])
		 	}
		 }

		 var Item = {
		 	construct: function (name) {
		 		this.name = name;
		 	},
		 	inspect: function () {
		 		console.log('it is ', this.name, '.');
		 	},
		 	kick: function () {
		 		console.log('klunk!');
		 	},
		 	take: function () {
		 		console.log('you cannot left ', this.name, '.');
		 	}
		 };

		 var SmallItme = Item.extend({
		 	kick: function () {
		 		console.log(this.name, ' flies across the room.');
		 	},
		 	take: function () {
		 		console.log('you take', this.name, '.');
		 	}
		 });

		 var pencil = SmallItme.create('the red pencil');

		 var DetailedItem = Item.extend({
		 	construct: function (name, details) {
		 		this.name = name;
		 		this.details = details;
		 	},
		 	inspect: function () {
		 		console.log('you see ', this.name, ', ', this.details, ' .');
		 	}
		 });

		var Monster = Item.extend({
		 	construct: function (name, dangerous) {
		 		this.name = name;
		 		this.dangerous = dangerous;
		 	},
		 	kick: function () {
		 		if (this.dangerous)
		 			console.log(this.name, ' bites your head off.');
		 		else
		 			console.log(this.name, ' squeaks and runs away.');
		 	},

		 });


		var DetailedMonster = DetailedItem.extend({
		 	construct: function (name, description, dangerous) {
		 		DetailedItem.construct.call(this, name, description);
		 		Monster.construct.call(this, name, dangerous);
		 	},
		 	kick: Monster.kick
		 });

		 var giantSloth = DetailedMonster.create('the giant sloth',
		 	'it is quietly hanging from a tree, munching leaves',
		 	true);
		 giantSloth.kick();


	</script>	
</body>
</html>