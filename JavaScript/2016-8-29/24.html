<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<title>模块化</title>
</head>
<body>
	<script type="text/javascript">
		'use strict'
		function map (func, array) {
			var len = array.length
				, result = new Array(len);
			for (let i = 0; i < len; i++) 
				result[i] = func(array[i]);
			return result;
		}

		/*
			模块引入：
			<script src="./map.js" type="text/javascript"><\/script>
			或
			<script >alert('Hi!'<\/script>
		 */


		 /**
		  * 函数作为局部命名空间
		  */
		var names = [ "January","February","March","April","May",
		 "June","July","August","September","October","November","December"];

		var getName = number=>names[number];
		var getNumber = function (name) {
			for (let number = 0, len = names.length; number < len; number++){
				if (name == names[number]) return number;
			}
		}

		console.log(getNumber('February')); // 1

		// 局部模块命名空间
		function buildMonthNameModule () {
			var names2 = [ "January","February","March","April","May",
		 "June","July","August","September","October","November","December"];

		 	var getMonthName = number => names[number];
		 	var getMonthNumber  = function (name) {
		 		for (let number = 0, len = names2.length; number < len; number ++) {
		 			if( names2[number] == name ) return number;
		 		}
		 	}

		 	window.getMonthName2 = getMonthName;
		 	window.getMonthNumber2 = getMonthNumber;
		}

		buildMonthNameModule();

		// provide 函数将变量设置到全局作用域上
		function provide (values) {
			forEachIn(vlaues, function (name, value){
				window[name] = value;
			});
		}

		function forEachIn (object, action) {
			for (let name in object) {
				if (Object.prototype.propertyIsEnumerable.call(object, name))
					action(name, object[name]);
			}
		}
		
		// 为了让代码更短， 可以编写局部作用域函数作为匿名函数，并用直接调用它
		(function(){
			var names3 = [ "January","February","March","April","May",
		 "June","July","August","September","October","November","December"];

		 provide({
		 	getMonthName3: number => names[number],
		 	getMonthNumber3: function (name) {
		 		for (let number=0, len = names3.length; number < len; number++ ) {
		 			if (names3[number] == name) return number;
		 		}
		 	}
		 });
		})();
	</script>	
</body>
</html>