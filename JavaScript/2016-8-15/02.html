<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<title>容器-链式调用</title>
</head>
<body>
	<script type="text/javascript">
		'use strict'
		var Container = function (x) {
			this.__value = x;
		}
		Container.of = x => new Container(x);

		//试试看
		console.log(Container.of(1)); // Container.__value :1
		console.log(Container.of('abcd'));

		//我们调用Container.of把东西装进容器里之后，由于这一层外壳的阻挡，普通的函数就对他们不再起作用了，所以我们需要加一个接口来让外部的函数也能作用到容器里面的值
		Container.prototype.map = function (f) {
			return Container.of(f(this.__value));
		}

		console.log(Container.of(3).map(x => x + 1).map(x => 'Result is ' + x));




		var Maybe = function (x) {
			this.__value = x;
		}

		Maybe.of = function (x) {
			return new Maybe(x);
		}

		Maybe.prototype.map = function (f) {
			return this.isNothing() ? Maybe.of(null) : Maybe.of(f(this.__value));
		}

		Maybe.prototype.isNothing = function () {
			return (this.__value === null || this.__value === undefined);
		}

		

	</script>
</body>
</html>