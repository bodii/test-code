<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<title>generator 生成器</title>
</head>
<body>
	<script>
		'use strict'

		/*
			generator (生成器)  是ES6标准引入的新的数据类型。
			一个generator看上去像个函数， 但可以返回多次。

		*/

		// example 1

		// 自增id的方法
		function*  next_id () {
			var value = 0;
			yield value;
			value ++;
			return value;
		}
		var g = next_id();
		console.log(g.next().value); // 0
		console.log(g.next().value); // 1

		// example 2  斐波那契数列
		function fib1(max) {
			var t,
				a = 0, 
				b = 1,
				arr = [0, 1];
			while (arr.length < max) {
				t = a + b;
				a = b;
				b = t;
				arr.push(t);
			}
			return arr;
		}
		console.log(fib1(5)); // [0 ,1, 1, 2, 3]

		function* fib2 (max) {
			var 
				t,
				a = 0,
				b = 1,
				n = 1;
			while (n < max) {
				yield a;
				t = a + b;
				a = b;
				b = t;
				n ++;
			}
			return a;
		}

		var test = fib2(5);

		var t0 = test.next();
		console.log('value: ' + t0.value + '  over: ' + t0.done); // 0
		var t1 = test.next();
		console.log('value: ' + t1.value + '  over: ' + t1.done); // 1
		var t2 = test.next();
		console.log('value: ' + t2.value + '  over: ' + t2.done); // 1
		var t3 = test.next();
		console.log('value: ' + t3.value + '  over: ' + t3.done); // 2
		var t4 = test.next();
		console.log('value: ' + t4.value + '  over: ' + t4.done); // 3
	
	</script>
</body>
</html>